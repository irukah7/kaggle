# Steel Plate Defect Prediction

* 目標
  * 銅板の様々な欠陥の発生確率を予測する
* 評価方法
  * 予測された確率とGroundTruthのターゲットを使用し、ROC曲線下面積を用いて評価される

最終的なスコアを計算するために、AUCは7つの欠陥カテゴリごとに計算され、平均化される。言い換えれば、スコアは各予測列の個々のAUCの平均である。

* 期限
  * 開始日：2024年3月
  * 最終提出日：2024年3月31日

* train.csv
  * Pastry, Z_Scratch, K_Scatch, Stains, Dirtiness, Bumps, Other_Faults
  * 7つのバイナリターゲットデータ
* test.csv
  * 7つのデータそれぞれの確率を予測すること

## 0310 memo
一旦コミット

## 0312
Notebookを読んでコンペの理解を深める：
https://www.kaggle.com/code/lucamassaron/steel-plate-eda-xgboost-is-all-you-need

## 0313
↑引き続きNotebook読み込み＋Notebook作成

## 0320
https://www.kaggle.com/code/hikarumoriya/steel-plate-eda-japanese

作成したNotebookの要約をしてみる。

* 訓練用データ
  * カラム数：34
  * データ数：19219
* テストデータ
  * カラム数：27
  * データ数：12814
  * テスト用データには訓練用データの最後の7カラムはない
* 欠損値
  * なし
* 提出用のフォーマット
  * カラム数：7
    * Pastry
    * Z_Scratch
    * K_Scratch
    * Stains
    * Dirtiness
    * Bumps
    * Other_Faults

## データセットの説明
このデータセットは銅板の断層を7つのタイプに分類したもので、いずれも表面的な損傷である。最後の7列（提出用カラム）はカテゴリカルなデータを数値データに変換（one-hotエンコーディング）したターゲットクラスである。

冒頭に書いたように7つのデータは欠陥を表すカテゴリ変数なのでそれを数値に直している。
テスト用にある27のカラムは独立変数でデータセットに欠損値はない。

ターゲットクラスのみのデータフレームを作成してどのような欠陥を示しているか確認する。

ターゲットクラスのデータフレームに対して、欠陥があるデータをカウントする。以下の結果が得られる。
* 行の合計値(df.sum(axis=1))を求めてみる
  * 0：18380
  * 1：818
  * 2：21
  
800以上のデータには欠陥がなく、21個のデータに2つの欠陥がある。 具体的に何があるのか確認する。

## ターゲットクラスの欠陥値が計2つあるデータ行の特徴を確認する
基本的にKスクラッチ（表面の傷）が1、Bumps（凹凸）が1ある。
精度のいいクラス分類をするために、欠陥0のクラスを追加して「Kスクラッチと凹凸が少数あるデータ」（21個のデータ）を削除して問題を多クラス分類にする。
**削除した21個のデータについてはどうしたらいんだろう。。**

```
# targets_binの各行の合計が2に等しければ、target配列の対応する要素に3を割り当てる
target[targets_bin.sum(axis=1)==2] = 3
```

↑これなに？
行の欠陥値合計が2のデータは3にするってどういうことだろう。。

1~7までのクラス付けをしていて、3は「K-Scratch」にあたるので、欠陥合計2のデータ（21件）をK-Scratchのラベルとして入れている。ってことになる（？）

この21件を別の方法の特徴量として扱えばもっと精度上がったりする可能性はありそう。

